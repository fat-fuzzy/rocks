/**
 * Grid Rails Layout
 */

html:has(.l\:grid\:metro) {
	block-size: 100%;
	scroll-snap-type: y mandatory;
}

body:has(.l\:grid\:metro) {
	inline-size: 100vw;
	block-size: 100vh;
	margin: 0;
	padding: 0;
	overflow: hidden;
	scroll-snap-align: start;
	scroll-snap-stop: normal;
	scroll-padding-block-start: var(--ui-size);
}

.l\:grid\:metro {
	--viewport-width-sm: calc(100vw - 2 * var(--ui-size));
	--max-block-size: calc(100vh - 2 * var(--ui-header-height));
	--max-inline-size: calc(100vw - 2 * var(--outline-offset-lg));
	inline-size: 100vw;
	block-size: 100vh;
	grid-gap: var(--outline-offset-lg);
	grid-template-areas:
		'zone-sidebar   zone-header   zone-header'
		'zone-content   zone-content  zone-content'
		'zone-content   zone-content  zone-content'
		'zone-content   zone-content  zone-content'
		'zone-content   zone-content  zone-content';
	grid-template-columns: auto 1fr auto;
	grid-template-rows: var(--ui-header-height) auto 1fr auto auto;
}

.l\:grid\:metro [class*='zone:'] {
	display: grid;
	grid-template-rows: subgrid;
}

.zone\:header {
	grid-area: zone-header;
	grid-template-areas: 'header-nav	app-context';
	grid-template-columns: 1fr auto;
}

.zone\:content {
	grid-area: zone-content;
	grid-template-areas:
		'zone-main    zone-main    zone-main'
		'zone-main    zone-main    zone-main'
		'page-context page-context page-context'
		'main-footer  main-footer  main-footer';
	grid-template-columns: subgrid;
	max-block-size: var(--max-block-size);
}

.zone\:main {
	grid-area: zone-main;
	grid-template-areas:
		'page-header page-header page-header'
		'page-main   page-main   page-main';
	grid-column: span 3;
}

.zone\:header > nav {
	grid-area: header-nav;
	align-content: center;
}

.zone\:header > * > ff-reveal {
	grid-area: ff-reveal;
	position: absolute;
	top: var(--ui-header-height);
}

.zone\:header > [aria-label='Settings'] {
	grid-area: app-context;
	align-content: center;
}

.zone\:sidebar {
	grid-area: zone-sidebar;
	grid-template-areas: 'side-nav';
	align-content: center;
}

.zone\:sidebar.expanded > nav > ff-reveal {
	position: absolute;
	align-content: center;
	max-block-size: var(--overlay-height-xs);
	margin-block-start: 0;
	padding-block: var(--ui-size-sm);
	padding-inline: var(--ui-size-sm);
	box-shadow: var(--shadow-md);
	z-index: var(--layout-z-index-reveal);
}

.zone\:sidebar.expanded .scroll\:y {
	max-block-size: var(--max-block-size);
}

.zone\:sidebar > nav > ff-reveal {
	grid-area: ff-reveal;
	position: absolute;
	top: var(--ui-header-height);
	inline-size: var(--sidebar-width);
}

.zone\:sidebar > nav > form {
	inline-size: fit-content;
}

.zone\:sidebar > nav > form [aria-expanded] {
	inline-size: fit-content;
}

.l\:grid\:metro {
	position: relative;

	.main-footer {
		grid-area: main-footer;
	}

	.page-header {
		grid-area: page-header;
	}

	.page-main {
		grid-area: page-main;
		padding-inline: var(--ui-size);
		overflow: unset;
		block-size: 100%;
		inline-size: 100%;
		max-inline-size: var(--max-inline-size);
		margin: 0 auto;
		padding-inline: var(--ui-size);
	}

	.page-main > section {
		scroll-margin-block: var(--size-base-2xl);
	}

	.page-context {
		grid-area: page-context;
		position: relative;
		inline-size: 100%;
		max-inline-size: var(--viewport-width-sm);
		padding-block: var(--outline-offset-md);
		padding-inline: var(--outline-offset-lg) var(--ui-size);
	}

	.page-context form:first-of-type [aria-expanded] {
		inline-size: 100%;
	}

	.page-context ff-reveal.expanded:first-of-type {
		--sidebar-width: var(--layout-sidebar-md);
		position: absolute;
		max-inline-size: var(--viewport-width-sm);
		block-size: fit-content;
		max-block-size: var(--overlay-height-2xs);
		bottom: calc(var(--ui-header-height) - var(--outline-offset-lg));
		top: unset;
		margin-block-start: 0;
		padding-block: var(--ui-size-sm);
		padding-inline: var(--outline-offset-lg);
		box-shadow: var(--shadow-md);
		z-index: var(--layout-z-index-sticky);
	}

	.page-context[class*='media:'],
	.page-context[class*='media:'] ff-reveal.expanded:first-of-type,
	.page-context[class*='media:'] ff-reveal.collapsed:first-of-type {
		max-block-size: unset;
		box-shadow: none;
	}

	.page-context[class*='media:'] {
		max-block-size: unset;
	}
}

@media screen and (min-width: 620px) {
	.l\:grid\:metro {
		grid-template-areas:
			'zone-sidebar  zone-header   zone-header'
			'zone-sidebar  zone-header   zone-header'
			'zone-content  zone-content  zone-content'
			'zone-content  zone-content  zone-content'
			'zone-content  zone-content  zone-content';
		grid-template-columns: auto 1fr auto;
		grid-template-rows: var(--ui-header-height) auto 1fr;
	}

	.zone\:content {
		grid-template-areas:
			'zone-main    zone-main    page-context'
			'zone-main    zone-main    page-context'
			'main-footer  main-footer  page-context';
	}

	.zone\:main {
		grid-template-areas:
			'page-header   page-header   page-details'
			'page-main     page-main     page-main';
		grid-template-columns: subgrid;
		grid-template-rows: subgrid;
		max-block-size: calc(100vh - var(--ui-header-height) - var(--ui-size));
	}

	.l\:grid\:metro {
		.page-main {
			min-block-size: calc(100vh - 6 * var(--ui-header-height));
			max-block-size: calc(100vh - 2 * var(--ui-header-height));
			padding-block-end: var(--ui-header-height);
		}

		.page-main footer {
			padding-block-end: var(--ui-header-height);
		}

		.zone\:sidebar > form {
			inline-size: var(--sidebar-width);
		}

		.zone\:header > nav {
			justify-content: flex-start;
		}

		.zone\:header > nav.expanded > ff-reveal,
		.zone\:header > nav.collapsed > ff-reveal {
			position: unset;
			box-shadow: unset;
			inline-size: calc(100vw - var(--sidebar-width));
			z-index: var(--layout-z-index-reveal);
			border-radius: var(--border-radius-null);
		}

		.zone\:sidebar.expanded > ff-reveal {
			position: unset;
			inline-size: calc(100vw - 6 * var(--ui-size) - var(--sidebar-width));
			max-inline-size: calc(100% - 2 * var(--ui-size));
			z-index: var(--layout-z-index-reveal);
		}

		.page-context {
			overflow: hidden auto;
			overscroll-behavior-y: contain;
			scrollbar-gutter: stable;
			scrollbar-width: thin;
			inline-size: var(--sidebar-width);
			max-inline-size: 100%;
			block-size: fit-content;
			max-block-size: calc(100vh - var(--ui-header-height) - var(--ui-size));
			padding-inline: var(--outline-offset-lg) var(--ui-size);
			padding-block-end: var(--ui-header-height);
		}

		.page-context > .l\:reveal\:auto {
			inline-size: var(--sidebar-width);
		}

		.page-context > .l\:reveal\:auto > ff-reveal {
			inline-size: 100%;
			max-inline-size: var(--sidebar-width);
			padding-inline: var(--ui-size) 0;
		}

		.page-context ff-reveal.expanded:first-of-type {
			position: unset;
		}

		.page-context ff-reveal.expanded:first-of-type,
		.page-context ff-reveal.collapsed:first-of-type {
			margin-block-start: var(--outline-offset-lg);
			position: unset;
			block-size: fit-content;
			max-block-size: unset;
			inline-size: 100%;
			max-inline-size: var(--sidebar-width);
			box-shadow: unset;
			padding: 0;
		}

		.page-context[class*='media:'],
		.page-context[class*='media:'] ff-reveal.expanded:first-of-type,
		.page-context[class*='media:'] ff-reveal.collapsed:first-of-type {
			inline-size: 100%;
			max-inline-size: unset;
		}

		.page-context[class*='media:'] > .l\:reveal\:auto {
			inline-size: 100%;
		}
	}
}

@media screen and (min-width: 935px) {
	.l\:grid\:metro {
		grid-template-areas:
			'zone-sidebar  zone-header   zone-header'
			'zone-sidebar  zone-header   zone-header'
			'zone-sidebar  zone-content  zone-content'
			'zone-sidebar  zone-content  zone-content'
			'zone-sidebar  zone-content  zone-content'
			'zone-sidebar  zone-content  zone-content';
		grid-template-columns: auto 1fr auto;
		grid-template-rows: var(--ui-header-height) auto 1fr;
	}

	.zone\:content {
		grid-template-areas:
			'zone-main  zone-main  page-context'
			'zone-main  zone-main  page-context'
			'main-footer  main-footer  page-context';
	}

	.zone\:main {
		grid-area: zone-main;
		grid-template-areas:
			'page-header   page-header   page-details'
			'page-main     page-main     page-main';
		grid-template-columns: subgrid;
		grid-template-rows: subgrid;
	}

	.zone\:sidebar {
		inline-size: 100%;
		max-inline-size: unset;
		min-inline-size: var(--sidebar-width);
	}

	.zone\:sidebar > ff-reveal {
		position: unset;
	}

	.zone\:sidebar.expanded > form {
		inline-size: calc(
			var(--sidebar-width) - var(--ui-size) + var(--outline-offset-sm)
		);
	}

	.zone\:sidebar > ff-reveal.expanded,
	.zone\:sidebar > ff-reveal.collapsed {
		margin-block-start: var(--outline-offset-lg);
		position: unset;
		block-size: fit-content;
		max-block-size: calc(100vh - 2 * var(--ui-header-height));
		max-inline-size: var(--sidebar-width);
		box-shadow: unset;
		padding: 0;
	}

	.zone\:sidebar > nav.collapsed,
	.zone\:sidebar > nav > ff-reveal.collapsed {
		--sidebar-width: var(--layout-sidebar-collapsed);
		max-inline-size: var(--sidebar-width);
	}
}
