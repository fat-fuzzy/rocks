form {
	--hue: var(--color-theme-primary);
	--chroma: var(--color-chroma-neutral);
	--lightness: var(--color-lightness-light);
	--chroma-contrast: var(--color-chroma-neutral);
	--lightness-contrast: var(--color-lightness-dark);
	--shade: oklch(var(--lightness) var(--chroma) var(--hue));
	--ink: oklch(var(--lightness-contrast) var(--chroma-contrast) var(--hue));
	--color-bg: var(--shade);
	--color-border: var(--shade);
	color: var(--ink);
	max-height: fit-content;
	background-color: var(--color-bg);
}

form * {
	font-family: var(--font-family-ui);
}

label,
.feedback {
	display: block;
}

label,
legend,
.form\:element {
	font-weight: var(--font-weight-ui);
	padding-inline: 0;
	background-color: inherit;
}

label {
	font-size: var(--font-size);
}

legend {
	font-size: var(--font-size);
	margin-block-end: var(--ui-size);
}

input,
select,
textarea {
	--ink: oklch(
		var(--lightness-contrast) var(--chroma-contrast) var(--hue-contrast)
	);
	--shade: oklch(var(--lightness) var(--chroma) var(--hue));
	--accent: oklch(var(--lightness-accent) var(--chroma-accent) var(--hue));
	--color-accent: var(--accent-semantic, var(--accent));
	--color-bg: var(--shade);
	--color-ink: var(--ink);
	--padding-block: calc(var(--ui-size-sm) - 2 * var(--border-width));
	--padding-inline: var(--ui-size);
	border: 1px solid var(--color-accent);
	border-radius: var(--border-radius-md);
	color: var(--color-ink);
	accent-color: var(--color-accent);
	border-color: var(--color-accent);
	font-size: var(--font-size);
	padding: var(--ui-size-sm) var(--ui-size);
}

label > input {
	max-width: 100%;
}

/* TODO : cleanup - use "current" size values */

[type='file'] {
	display: flex;
	align-items: center;
	font-size: var(--font-size-sm);
	padding: var(--ui-size) var(--ui-size) var(--ui-size-sm);
}

[type='file']:hover {
	--lightness: var(--color-lightness-000);
}

[type='file']:active {
	--lightness: var(--color-lightness-light);
}

input:hover,
label:hover > [type='file'] {
	--lightness: var(--color-lightness-100);
	--lightness-contrast: var(--color-contrast-200);
}

[disabled] {
	filter: contrast(90%) opacity(80%);
	cursor: not-allowed;
}

/* Manage color on .bare and .outline labels adn inputs */

label.variant\:outline > input,
label.variant\:outline > [type='file'] {
	border-color: var(--color-bg);
}

label.variant\:bare > input,
label.variant\:bare > [type='file'] {
	border-color: var(--color-bg);
}

/* Display range input step labels */

[type='range'][list='markers'] + datalist {
	display: flex;
	justify-content: space-between;
	padding: 0 var(--ui-size);
}

[type='range'][list='markers'] + datalist > option {
	font-size: var(--font-size-sm);
	font-weight: var(--font-weight-body);
	padding: 0;
}

[type='range']:not([list]) + datalist > option {
	display: none;
}

label[class*='l:stack'] > [type='range'] {
	margin-block-start: 0;
}
