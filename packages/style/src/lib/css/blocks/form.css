form {
	--hue: var(--color-theme-primary);
	--chroma: var(--color-chroma-neutral);
	--lightness: var(--color-lightness-light);
	--chroma-contrast: var(--color-chroma-neutral);
	--lightness-contrast: var(--color-lightness-dark);
	--shade: oklch(var(--lightness) var(--chroma) var(--hue));
	--ink: oklch(var(--lightness-contrast) var(--chroma-contrast) var(--hue));
	--bg-color: var(--shade);
	--border-color: var(--shade);
	color: var(--ink);
	max-height: fit-content;
	background-color: var(--bg-color);
}

form * {
	font-family: var(--font-family-ui);
}

label,
.feedback {
	display: block;
}

label,
legend,
.form\:element {
	font-weight: var(--font-weight-ui);
	padding-inline: 0;
	background-color: inherit;
}

label {
	font-size: var(--font-size);
}

legend {
	font-size: var(--font-size);
	margin-block-end: var(--ui-size);
}

input,
select,
textarea {
	--accent-color: var(--ink);
	--padding-block: calc(var(--ui-size-sm) - 2 * var(--border-width));
	--padding-inline: var(--ui-size);
	border: 1px solid var(--border-color);
	border-radius: var(--radius-base);
	color: var(--ink);
	accent-color: var(--accent-color);
	font-size: var(--font-size);
	padding: var(--ui-size-sm) var(--ui-size);
}

label > input {
	max-width: 100%;
}

/* TODO : cleanup - use "current" size values */

[type='file'] {
	display: flex;
	align-items: center;
	font-size: var(--font-size-sm);
	padding: var(--ui-size) var(--ui-size) var(--ui-size-sm);
	color: var(--ink);
}

[type='file']:hover {
	--lightness: var(--color-lightness-000);
	background-color: var(--shade);
}

[type='file']:active {
	--lightness: var(--color-lightness-light);
	background-color: var(--shade);
}

.feedback {
	font-size: var(--font-size-sm);
	min-height: calc(var(--font-size-sm) * var(--size-ratio-md));
}

/* TODO: move this to recipes ? */
label > .feedback {
	padding: var(--ui-size-sm) var(--ui-size);
}

label > .feedback + * {
	margin-block-start: var(--ui-size);
}

input:hover,
label:hover > [type='file'] {
	--lightness: var(--color-lightness-100);
	--lightness-contrast: var(--color-contrast-200);
	color: var(--ink);
	background-color: var(--shade);
}

[disabled] {
	filter: contrast(90%) opacity(80%);
	cursor: not-allowed;
}

/* Manage color on .bare and .outline labels adn inputs */

label.variant\:outline > input,
label.variant\:outline > [type='file'] {
	color: var(--ink);
	border-color: var(--ink);
	background-color: var(--shade);
}

label.variant\:bare > input,
label.variant\:bare > [type='file'] {
	color: var(--ink);
	border-color: var(--shade);
	background-color: var(--shade);
}

fieldset.radio input,
fieldset.check input {
	flex-grow: 0;
	flex-basis: var(--font-size);
}

fieldset.radio,
fieldset.check {
	justify-content: flex-start;
	label {
		color: var(--ink);
	}

	label:hover {
		background-color: var(--shade);
	}

	label.variant\:outline:hover {
		--lightness: var(--color-lightness-100);
		--lightness-contrast: var(--color-lightness-400);
		background-color: var(--shade);
	}

	label.variant\:bare:hover {
		--lightness: var(--color-lightness-000);
		--lightness-contrast: var(--color-lightness-400);
		background-color: var(--shade);
	}
}

/* Display range input step labels */

[type='range'][list='markers'] + datalist {
	display: flex;
	justify-content: space-between;
	padding: 0 var(--ui-size);
}

[type='range'][list='markers'] + datalist > option {
	font-size: var(--font-size-sm);
	font-weight: var(--font-weight-body);
	padding: 0;
}

[type='range']:not([list]) + datalist > option {
	display: none;
}

label[class*='l:stack'] > [type='range'] {
	margin-block-start: 0;
}

label.radio,
label.check {
	margin: 0;
	width: 100%;
	display: flex;
	justify-content: space-between;
	gap: var(--ui-size);
}

label.radio[class*='emoji'] span,
label.check[class*='emoji'] span {
	flex-grow: 1;
	font-size: var(--font-size);
}

.night {
	label:hover > input,
	label:hover > [type='file'] {
		color: var(--ink);
	}

	label.fill > input,
	label.fill > [type='file'] {
		background-color: var(--shade);
	}

	label.outline > input,
	label.outline > [type='file'] {
		color: var(--ink);
	}

	label.bare > input,
	label.bare > [type='file'] {
		color: var(--ink);
	}
}

label.primary:hover > input,
label.primary > input:active,
label.accent:hover > input,
label.accent > input:active,
label.highlight:hover > input,
label.highlight > input:active {
	color: var(--ink);
	background-color: var(--shade);
}
