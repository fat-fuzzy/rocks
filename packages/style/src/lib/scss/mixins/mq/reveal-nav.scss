/*  reveal-auto media queries */

@mixin switchToRowStyles_RevealNav($containerSize, $size) {
	@container reveal-nav-#{$size} (inline-size < #{$containerSize}) {
		[class*='l:reveal'].sticky {
			--y-size-sticky: calc(
				100vh - var(--size-ui-header-height) - var(--outline-offset-settings)
			);
			position: sticky;
			top: var(--y-axis);
			z-index: 1;

			&.show {
				--y-size: var(--y-size-sticky);
				--x-size: calc(var(--sidebar-width) - var(--outline-offset-settings));
				/* transition: transform 250ms ease-in-out; */

				.content {
					overflow: hidden auto;
					inline-size: var(--x-size);
					block-size: fit-content;
					transform: translateX(0);
					opacity: 1;
					transition: transform 100ms ease-in;
				}

				.content > * {
					inline-size: 100%;
				}
			}

			&.left nav,
			&.right nav {
				display: flex;
				flex-direction: column;
				overflow: hidden auto;

				ul.depth-0 {
					padding-block: var(--ui-size) var(--ui-size-lg);
				}
			}

			&.minimize.left,
			&.minimize.right {
				--y-size: var(--y-size-sticky);
				--x-size: calc(var(--layout-sidebar-minimize) + var(--ui-size-lg));

				.content {
					--x-axis: calc(var(--x-size) * -1);
					inline-size: var(--x-size);
					max-inline-size: calc(100% - var(--outline-offset-base));
				}

				nav {
					.content {
						block-size: calc(100vh - var(--size-ui-header-height));
						overflow: hidden auto;
					}
					.content .depth-1 .show .content {
						block-size: fit-content;
						overflow: hidden auto;
					}
					.content .depth-1 .minimize .content {
						block-size: 0;
						overflow: hidden;
					}
				}
			}
		}
	}
}

/**
	 * This fixes the layout for the reveal nav when the sidebar is minimized
	 * TODO: figure out how to avoid this magic stuff: design change? / code change?
	 */
@media screen and (min-width: 1225px) {
	[class*='reveal-nav'].minimize {
		--sidebar-width: calc(var(--layout-sidebar-minimize) + var(--ui-size-lg));
	}
}

@include switchToRowStyles_RevealNav(220px, '2xs');
@include switchToRowStyles_RevealNav(240px, 'xs');
@include switchToRowStyles_RevealNav(260px, 'sm');
@include switchToRowStyles_RevealNav(300px, 'md');
@include switchToRowStyles_RevealNav(320px, 'lg');
@include switchToRowStyles_RevealNav(360px, 'xl');
@include switchToRowStyles_RevealNav(380px, '2xl');
